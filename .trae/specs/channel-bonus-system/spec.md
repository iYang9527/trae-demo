# 渠道奖金管理系统 - 产品需求文档

## 概述
- **摘要**：一个用于管理上游渠道、分享渠道给下游用户、追踪订单和奖金分配的完整系统，帮助用户高效管理渠道网络和奖金核算。
- **目的**：解决渠道管理混乱、奖金核算复杂、订单统计困难的问题，提供系统化的管理工具。
- **目标用户**：拥有上游渠道资源并需要分享给下游用户的渠道管理者。

## 目标
- 实现上游渠道的集中管理和维护
- 提供渠道分享机制给下游用户
- 自动追踪和核算订单及奖金
- 生成详细的财务报表和统计分析
- 确保奖金分配的透明性和准确性

## 非目标（范围外）
- 直接处理支付交易（仅追踪和核算，不处理实际支付）
- 提供第三方支付集成
- 支持复杂的多级分销网络（仅支持一级分销）
- 包含电商购物功能（仅管理渠道，不处理购物流程）

## 背景与上下文
- 用户从上游获取多个渠道，通过这些渠道购物可获得奖金
- 用户将渠道分享给下游用户，下游用户通过特定方式（如提交表单）获取部分奖金
- 下游用户数量众多，需要系统化管理以提高效率
- 目前缺乏有效的工具进行订单统计和奖金核算

## 功能需求
- **FR-1**：上游渠道管理 - 支持添加、编辑、删除上游渠道信息
- **FR-2**：下游用户管理 - 支持添加、编辑、删除下游用户信息
- **FR-3**：渠道分享机制 - 生成唯一的分享链接或代码给下游用户
- **FR-4**：订单追踪 - 记录通过渠道产生的订单信息
- **FR-5**：奖金核算 - 根据订单自动计算上游奖金和下游分配
- **FR-6**：代付状态管理 - 记录下游用户的代付状态，支持对账查看
- **FR-7**：财务报表 - 生成详细的奖金收支报表
- **FR-8**：数据统计 - 提供渠道性能和用户活跃度的统计分析

## 非功能需求
- **NFR-1**：性能 - 系统应能处理至少1000个下游用户和100个上游渠道
- **NFR-2**：安全性 - 数据传输和存储应加密，确保敏感信息安全
- **NFR-3**：可用性 - 系统应提供友好的用户界面，操作简单直观
- **NFR-4**：可扩展性 - 系统架构应支持未来功能扩展和用户量增长

## 约束
- **技术**：基于Web技术栈，支持主流浏览器
- **业务**：符合相关财务法规和数据隐私要求
- **依赖**：可能需要与上游渠道的API集成以获取订单数据

## 假设
- 上游渠道会提供订单数据的获取方式（API或数据文件）
- 奖金分配规则由用户预先设定
- 下游用户通过提交表单或其他方式确认订单

## 验收标准

### AC-1：上游渠道管理
- **给定**：用户登录系统
- **当**：用户添加/编辑/删除上游渠道
- **则**：渠道信息被正确保存/更新/删除，且在系统中可见
- **验证**：`programmatic`

### AC-2：下游用户管理
- **给定**：用户登录系统
- **当**：用户添加/编辑/删除下游用户
- **则**：用户信息被正确保存/更新/删除，且在系统中可见
- **验证**：`programmatic`

### AC-3：渠道分享
- **给定**：系统中存在上游渠道和下游用户
- **当**：用户为下游用户生成分享链接/代码
- **则**：系统生成唯一的分享标识，且可关联到特定渠道和用户
- **验证**：`programmatic`

### AC-4：订单追踪
- **给定**：下游用户通过分享渠道产生订单
- **当**：系统接收到订单信息
- **则**：订单被正确记录，关联到相应渠道和用户
- **验证**：`programmatic`

### AC-5：奖金核算
- **给定**：系统中存在已确认的订单
- **当**：系统执行奖金核算
- **则**：上游奖金和下游分配金额被正确计算
- **验证**：`programmatic`

### AC-6：代付状态管理
- **给定**：系统中存在下游用户和奖金分配记录
- **当**：用户更新下游用户的代付状态
- **则**：代付状态被正确记录，且在对账时可直观查看
- **验证**：`programmatic`

### AC-7：财务报表
- **给定**：系统中存在订单和奖金数据
- **当**：用户请求财务报表
- **则**：系统生成详细的奖金收支报表，数据准确无误
- **验证**：`human-judgment`

### AC-8：数据统计
- **给定**：系统中存在足够的历史数据
- **当**：用户查看统计分析
- **则**：系统展示渠道性能和用户活跃度的可视化数据
- **验证**：`human-judgment`

## 开放问题
- [ ] 上游渠道的订单数据如何获取？API集成还是手动导入？
- [ ] 奖金分配的具体规则和比例如何设定？
- [ ] 下游用户如何提交订单信息？通过表单还是其他方式？
- [ ] 是否需要支持多级分销结构？
- [ ] 系统的部署方式和访问控制策略？